<div class="col-md-8 col-md-offset-2">
    <div class="row">
        <div class="panel panel-default">

            <div class="panel-heading">
                <h2>Create New Listing</h2>
                <div class = "small-heading">(All fields required.) </div>
            </div>

            <div class="panel-body">

                <%= simple_form_for(@listing, html: {
                    authenticity_token: true,
                    multipart: true,
                    class: 'form-horizontal ',
                    presence: true
                }) do |f| %>

                    <div class="input-group">
                        <div class="input-group-addon">Main Category</div>
                        <div class="form-control">
                            <%= f.select :category_id,
                                Category.all.map {|f| [f.name, f.id]},
                                include_blank: true,
                                required: true
                            %>
                        </div>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="input-group-addon">Sub Category</div>
                        <div class="form-control">
                            <%= f.select :subcategory_id,
                                [],
                                include_blank: true,
                                name: "listing[subcategory_id]",
                                id: "listing_subcategory_id",
                                required: true
                            %>
                        </div>
                    </div>
                    <br>

                    <div id="sub_category_cost_container" style="display: none">
                        <div class="input-group">
                            <div class="input-group-addon" style="color: red">Fee required</div>
                            <div class="form-control fee_amount_message">
                                Selected category requires a payment of <span id="fee_amount" style="font-weight: bolder"></span> on the next step.
                            </div>
                        </div>
                        <br>
                    </div>

                    <div class="input-group">
                        <div class="input-group-addon">Price</div>
                        <%= f.text_field :price,
                            class:"form-control",
                            required: true
                        %>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="input-group-addon">Posting Title</div>
                        <%= f.text_field :title,
                            class: "form-control",
                            required: true,
                            type: "text",
                            pattern: "[A-Za-z]{3}"
                        %>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="input-group-addon">City</div>
                        <%= f.text_field :city,
                            class: "form-control",
                            required: true
                        %>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="input-group-addon">State</div>
                        <%= f.text_field :state,
                            class: "form-control",
                            required: true
                        %>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="input-group-addon">Zip</div>
                        <%= f.text_field :zipcode,
                            class: "form-control",
                            required: true,
                            maxlength: "5"
                        %>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="input-group-addon">Description</div>
                        <%= f.text_area :description,
                            class: "form-control",
                            required: true
                        %>
                    </div>
                    <br>

                    <div class="input-group">
                        <div class="actions">
                            <%= f.submit "Submit Your Post",
                                class: "btn btn-success",
                                id: "listings_submit"
                            %>
                        </div>
                    </div>

                <% end %>

            </div>
        </div>
    </div>
</div>

<%= render "processing_overlay" %>
